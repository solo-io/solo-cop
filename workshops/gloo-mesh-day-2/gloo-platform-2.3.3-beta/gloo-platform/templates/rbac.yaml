# Code generated by skv2. DO NOT EDIT.


# Rbac manifests for gloo-mesh-mgmt-server

{{- $glooMeshMgmtServer := $.Values.glooMgmtServer}}
{{- if $glooMeshMgmtServer.enabled }}
---

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-mgmt-server-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-mgmt-server
rules:
- apiGroups:
  - ""
  resources:
  - namespaces
  - secrets
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - extauthservers
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  - ratelimitserverconfigs
  - ratelimitserversettings
  - roottrustpolicies
  - waypointlifecyclemanagers
  - workspaces
  - workspacesettings
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  - graphqlresolvermaps
  - graphqlschemas
  - graphqlstitchedschemas
  - portalgroups
  - portals
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  - cloudresources
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis
  - discoveredgateways
  - meshes
  - portalconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints
  - externalservices
  - routetables
  - virtualdestinations
  - virtualgateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies
  - failoverpolicies
  - faultinjectionpolicies
  - graphqlpersistedquerycachepolicies
  - outlierdetectionpolicies
  - retrytimeoutpolicies
  - trimproxyconfigpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies
  - clienttlspolicies
  - corspolicies
  - csrfpolicies
  - dlppolicies
  - extauthpolicies
  - graphqlallowedquerypolicies
  - jwtpolicies
  - wafpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies
  - httpbufferpolicies
  - mirrorpolicies
  - proxyprotocolpolicies
  - ratelimitclientconfigs
  - ratelimitpolicies
  - transformationpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - secrets/status
  - serviceaccounts/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards/status
  - extauthservers/status
  - gatewaylifecyclemanagers/status
  - istiolifecyclemanagers/status
  - kubernetesclusters/status
  - ratelimitserverconfigs/status
  - ratelimitserversettings/status
  - roottrustpolicies/status
  - waypointlifecyclemanagers/status
  - workspaces/status
  - workspacesettings/status
  verbs:
  - get
  - update
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs/status
  - graphqlresolvermaps/status
  - graphqlschemas/status
  - graphqlstitchedschemas/status
  - portalgroups/status
  - portals/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  - statefulsets/status
  verbs:
  - get
  - update
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders/status
  - cloudresources/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis/status
  - discoveredgateways/status
  - meshes/status
  - portalconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints/status
  - externalservices/status
  - routetables/status
  - virtualdestinations/status
  - virtualgateways/status
  verbs:
  - get
  - update
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies/status
  - failoverpolicies/status
  - faultinjectionpolicies/status
  - graphqlpersistedquerycachepolicies/status
  - outlierdetectionpolicies/status
  - retrytimeoutpolicies/status
  - trimproxyconfigpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies/status
  - clienttlspolicies/status
  - corspolicies/status
  - csrfpolicies/status
  - dlppolicies/status
  - extauthpolicies/status
  - graphqlallowedquerypolicies/status
  - jwtpolicies/status
  - wafpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies/status
  - httpbufferpolicies/status
  - mirrorpolicies/status
  - proxyprotocolpolicies/status
  - ratelimitclientconfigs/status
  - ratelimitpolicies/status
  - transformationpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  - issuedcertificates
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests/status
  - issuedcertificates/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - kubernetesclusters
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - kubernetesclusters/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - nodes
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - extauthservers
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  - ratelimitserverconfigs
  - ratelimitserversettings
  - roottrustpolicies
  - waypointlifecyclemanagers
  - workspaces
  - workspacesettings
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  - graphqlresolvermaps
  - graphqlschemas
  - graphqlstitchedschemas
  - portalgroups
  - portals
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  - cloudresources
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis
  - discoveredgateways
  - meshes
  - portalconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints
  - externalservices
  - routetables
  - virtualdestinations
  - virtualgateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings
  - clusterroles
  - rolebindings
  - roles
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies
  - failoverpolicies
  - faultinjectionpolicies
  - graphqlpersistedquerycachepolicies
  - outlierdetectionpolicies
  - retrytimeoutpolicies
  - trimproxyconfigpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies
  - clienttlspolicies
  - corspolicies
  - csrfpolicies
  - dlppolicies
  - extauthpolicies
  - graphqlallowedquerypolicies
  - jwtpolicies
  - wafpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies
  - httpbufferpolicies
  - mirrorpolicies
  - proxyprotocolpolicies
  - ratelimitclientconfigs
  - ratelimitpolicies
  - transformationpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - nodes/status
  - serviceaccounts/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards/status
  - extauthservers/status
  - gatewaylifecyclemanagers/status
  - istiolifecyclemanagers/status
  - kubernetesclusters/status
  - ratelimitserverconfigs/status
  - ratelimitserversettings/status
  - roottrustpolicies/status
  - waypointlifecyclemanagers/status
  - workspaces/status
  - workspacesettings/status
  verbs:
  - get
  - update
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs/status
  - graphqlresolvermaps/status
  - graphqlschemas/status
  - graphqlstitchedschemas/status
  - portalgroups/status
  - portals/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  - statefulsets/status
  verbs:
  - get
  - update
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders/status
  - cloudresources/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis/status
  - discoveredgateways/status
  - meshes/status
  - portalconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints/status
  - externalservices/status
  - routetables/status
  - virtualdestinations/status
  - virtualgateways/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules/status
  - envoyfilters/status
  - gateways/status
  - serviceentries/status
  - sidecars/status
  - virtualservices/status
  - workloadentries/status
  verbs:
  - get
  - update
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings/status
  - clusterroles/status
  - rolebindings/status
  - roles/status
  verbs:
  - get
  - update
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies/status
  - failoverpolicies/status
  - faultinjectionpolicies/status
  - graphqlpersistedquerycachepolicies/status
  - outlierdetectionpolicies/status
  - retrytimeoutpolicies/status
  - trimproxyconfigpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies/status
  - peerauthentications/status
  verbs:
  - get
  - update
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies/status
  - clienttlspolicies/status
  - corspolicies/status
  - csrfpolicies/status
  - dlppolicies/status
  - extauthpolicies/status
  - graphqlallowedquerypolicies/status
  - jwtpolicies/status
  - wafpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies/status
  - httpbufferpolicies/status
  - mirrorpolicies/status
  - proxyprotocolpolicies/status
  - ratelimitclientconfigs/status
  - ratelimitpolicies/status
  - transformationpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - gatewaylifecyclemanagers/status
  - istiolifecyclemanagers/status
  - kubernetesclusters/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - '*'
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  verbs:
  - '*'
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - '*'
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies
  verbs:
  - '*'
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - portalconfigs
  - xdsconfigs
  verbs:
  - '*'
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - '*'
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - '*'
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - '*'
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - '*'
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudresources
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - namespaces
  - serviceaccounts
  - services
  verbs:
  - '*'
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - '*'
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - '*'
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings
  - clusterroles
  verbs:
  - '*'
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  verbs:
  - '*'
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - get
  - list
  - watch

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-mgmt-server-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-mgmt-server
subjects:
- kind: ServiceAccount
  name: gloo-mesh-mgmt-server
  namespace: {{ .Release.Namespace }}
roleRef:
  kind: ClusterRole
  name: gloo-mesh-mgmt-server-{{ .Release.Namespace }}
  apiGroup: rbac.authorization.k8s.io

{{- end }}
# Rbac manifests for gloo-mesh-agent

{{- $glooMeshAgent := $.Values.glooAgent}}
{{- if $glooMeshAgent.enabled }}
---

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-agent-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-agent
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - namespaces
  - nodes
  - pods
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - namespaces/status
  - nodes/status
  - pods/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - replicasets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - replicasets/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - kubernetesclusters
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - kubernetesclusters/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - secrets
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - extauthservers
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  - ratelimitserverconfigs
  - ratelimitserversettings
  - roottrustpolicies
  - waypointlifecyclemanagers
  - workspaces
  - workspacesettings
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  - graphqlresolvermaps
  - graphqlschemas
  - graphqlstitchedschemas
  - portalgroups
  - portals
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  - cloudresources
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis
  - discoveredgateways
  - meshes
  - portalconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints
  - externalservices
  - routetables
  - virtualdestinations
  - virtualgateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies
  - failoverpolicies
  - faultinjectionpolicies
  - graphqlpersistedquerycachepolicies
  - outlierdetectionpolicies
  - retrytimeoutpolicies
  - trimproxyconfigpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies
  - clienttlspolicies
  - corspolicies
  - csrfpolicies
  - dlppolicies
  - extauthpolicies
  - graphqlallowedquerypolicies
  - jwtpolicies
  - wafpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies
  - httpbufferpolicies
  - mirrorpolicies
  - proxyprotocolpolicies
  - ratelimitclientconfigs
  - ratelimitpolicies
  - transformationpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - secrets/status
  - serviceaccounts/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards/status
  - extauthservers/status
  - gatewaylifecyclemanagers/status
  - istiolifecyclemanagers/status
  - kubernetesclusters/status
  - ratelimitserverconfigs/status
  - ratelimitserversettings/status
  - roottrustpolicies/status
  - waypointlifecyclemanagers/status
  - workspaces/status
  - workspacesettings/status
  verbs:
  - get
  - update
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs/status
  - graphqlresolvermaps/status
  - graphqlschemas/status
  - graphqlstitchedschemas/status
  - portalgroups/status
  - portals/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  - statefulsets/status
  verbs:
  - get
  - update
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders/status
  - cloudresources/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis/status
  - discoveredgateways/status
  - meshes/status
  - portalconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints/status
  - externalservices/status
  - routetables/status
  - virtualdestinations/status
  - virtualgateways/status
  verbs:
  - get
  - update
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies/status
  - failoverpolicies/status
  - faultinjectionpolicies/status
  - graphqlpersistedquerycachepolicies/status
  - outlierdetectionpolicies/status
  - retrytimeoutpolicies/status
  - trimproxyconfigpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies/status
  - clienttlspolicies/status
  - corspolicies/status
  - csrfpolicies/status
  - dlppolicies/status
  - extauthpolicies/status
  - graphqlallowedquerypolicies/status
  - jwtpolicies/status
  - wafpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies/status
  - httpbufferpolicies/status
  - mirrorpolicies/status
  - proxyprotocolpolicies/status
  - ratelimitclientconfigs/status
  - ratelimitpolicies/status
  - transformationpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - portalconfigs
  - xdsconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates/status
  - portalconfigs/status
  - xdsconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules/status
  - envoyfilters/status
  - gateways/status
  - serviceentries/status
  - sidecars/status
  - virtualservices/status
  - workloadentries/status
  verbs:
  - get
  - update
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies/status
  verbs:
  - get
  - update
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies/status
  - peerauthentications/status
  verbs:
  - get
  - update
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - configmaps
  - namespaces
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - meshes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - namespaces/status
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - daemonsets/status
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates/status
  - meshes/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - podbouncedirectives
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - pods/status
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - podbouncedirectives/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - gatewaylifecyclemanagers/status
  - istiolifecyclemanagers/status
  - kubernetesclusters/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings
  - clusterroles
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces/status
  - serviceaccounts/status
  - services/status
  verbs:
  - get
  - update
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations/status
  - validatingwebhookconfigurations/status
  verbs:
  - get
  - update
- apiGroups:
  - apps
  resources:
  - deployments/status
  verbs:
  - get
  - update
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators/status
  verbs:
  - get
  - update
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings/status
  - clusterroles/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - xdsconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - xdsconfigs/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests/status
  verbs:
  - get
  - update
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  - discoveredcnis
  - discoveredgateways
  - issuedcertificates
  - meshes
  - podbouncedirectives
  - portalconfigs
  - xdsconfigs
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - certificaterequests
  - podbouncedirectives
  verbs:
  - '*'
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudresources
  verbs:
  - '*'
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - configmaps
  - pods
  - secrets
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - podbouncedirectives
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - secrets
  verbs:
  - '*'
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  verbs:
  - '*'
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - '*'
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies
  verbs:
  - '*'
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - '*'
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - issuedcertificates
  - portalconfigs
  - xdsconfigs
  verbs:
  - '*'
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - '*'
- apiGroups:
  - networking.k8s.io
  resources:
  - networkpolicies
  verbs:
  - '*'
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - '*'
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - namespaces
  - serviceaccounts
  - services
  verbs:
  - '*'
- apiGroups:
  - admissionregistration.k8s.io
  resources:
  - mutatingwebhookconfigurations
  - validatingwebhookconfigurations
  verbs:
  - '*'
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - '*'
- apiGroups:
  - install.istio.io
  resources:
  - istiooperators
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings
  - clusterroles
  verbs:
  - '*'
- apiGroups:
  - ""
  resources:
  - namespaces
  - services
  - serviceaccounts
  - configmaps
  verbs:
  - '*'
- apiGroups:
  - apps
  resources:
  - deployments
  verbs:
  - '*'
- apiGroups:
  - apiextensions.k8s.io
  resources:
  - customresourcedefinitions
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterroles
  - clusterrolebindings
  verbs:
  - '*'
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - '*'
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - roles
  - rolebindings
  - clusterroles
  - clusterrolebindings
  verbs:
  - get
  - list
  - watch

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-agent-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-agent
subjects:
- kind: ServiceAccount
  name: gloo-mesh-agent
  namespace: {{ .Release.Namespace }}
roleRef:
  kind: ClusterRole
  name: gloo-mesh-agent-{{ .Release.Namespace }}
  apiGroup: rbac.authorization.k8s.io

{{- end }}
# Rbac manifests for gloo-mesh-ui

{{- $glooMeshUi := $.Values.glooUi}}
{{- if $glooMeshUi.enabled }}
---

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-ui-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-ui
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  - secrets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - kubernetesclusters
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - configmaps/status
  - secrets/status
  verbs:
  - get
  - update
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards/status
  - kubernetesclusters/status
  verbs:
  - get
  - update
- apiGroups:
  - ""
  resources:
  - namespaces
  - nodes
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - extauthservers
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  - ratelimitserverconfigs
  - ratelimitserversettings
  - roottrustpolicies
  - waypointlifecyclemanagers
  - workspaces
  - workspacesettings
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  - graphqlresolvermaps
  - graphqlschemas
  - graphqlstitchedschemas
  - portalgroups
  - portals
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - cilium.io
  resources:
  - ciliumnetworkpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extauth.solo.io
  resources:
  - authconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  - cloudresources
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis
  - discoveredgateways
  - meshes
  - portalconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints
  - externalservices
  - routetables
  - virtualdestinations
  - virtualgateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.istio.io
  resources:
  - destinationrules
  - envoyfilters
  - gateways
  - serviceentries
  - sidecars
  - virtualservices
  - workloadentries
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ratelimit.solo.io
  resources:
  - ratelimitconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - rbac.authorization.k8s.io
  resources:
  - clusterrolebindings
  - clusterroles
  - rolebindings
  - roles
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies
  - failoverpolicies
  - faultinjectionpolicies
  - graphqlpersistedquerycachepolicies
  - outlierdetectionpolicies
  - retrytimeoutpolicies
  - trimproxyconfigpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.istio.io
  resources:
  - authorizationpolicies
  - peerauthentications
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies
  - clienttlspolicies
  - corspolicies
  - csrfpolicies
  - dlppolicies
  - extauthpolicies
  - graphqlallowedquerypolicies
  - jwtpolicies
  - wafpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies
  - httpbufferpolicies
  - mirrorpolicies
  - proxyprotocolpolicies
  - ratelimitclientconfigs
  - ratelimitpolicies
  - transformationpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - ""
  resources:
  - namespaces
  - secrets
  - serviceaccounts
  - services
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - admin.gloo.solo.io
  resources:
  - dashboards
  - extauthservers
  - gatewaylifecyclemanagers
  - istiolifecyclemanagers
  - kubernetesclusters
  - ratelimitserverconfigs
  - ratelimitserversettings
  - roottrustpolicies
  - waypointlifecyclemanagers
  - workspaces
  - workspacesettings
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  - graphqlresolvermaps
  - graphqlschemas
  - graphqlstitchedschemas
  - portalgroups
  - portals
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - apps
  resources:
  - daemonsets
  - deployments
  - statefulsets
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - extensions.policy.gloo.solo.io
  resources:
  - wasmdeploymentpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - infrastructure.gloo.solo.io
  resources:
  - cloudproviders
  - cloudresources
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - discoveredcnis
  - discoveredgateways
  - meshes
  - portalconfigs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - networking.gloo.solo.io
  resources:
  - externalendpoints
  - externalservices
  - routetables
  - virtualdestinations
  - virtualgateways
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - observability.policy.gloo.solo.io
  resources:
  - accesslogpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - resilience.policy.gloo.solo.io
  resources:
  - connectionpolicies
  - failoverpolicies
  - faultinjectionpolicies
  - graphqlpersistedquerycachepolicies
  - outlierdetectionpolicies
  - retrytimeoutpolicies
  - trimproxyconfigpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - security.policy.gloo.solo.io
  resources:
  - accesspolicies
  - clienttlspolicies
  - corspolicies
  - csrfpolicies
  - dlppolicies
  - extauthpolicies
  - graphqlallowedquerypolicies
  - jwtpolicies
  - wafpolicies
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - trafficcontrol.policy.gloo.solo.io
  resources:
  - headermanipulationpolicies
  - httpbufferpolicies
  - mirrorpolicies
  - proxyprotocolpolicies
  - ratelimitclientconfigs
  - ratelimitpolicies
  - transformationpolicies
  verbs:
  - get
  - list
  - watch

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-ui-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-ui
subjects:
- kind: ServiceAccount
  name: gloo-mesh-ui
  namespace: {{ .Release.Namespace }}
roleRef:
  kind: ClusterRole
  name: gloo-mesh-ui-{{ .Release.Namespace }}
  apiGroup: rbac.authorization.k8s.io

{{- end }}
# Rbac manifests for gloo-mesh-portal-server

{{- $glooMeshPortalServer := $.Values.glooPortalServer}}
{{- if $glooMeshPortalServer.enabled }}
---

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-portal-server-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-portal-server
rules:
- apiGroups:
  - apimanagement.gloo.solo.io
  resources:
  - apidocs
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - internal.gloo.solo.io
  resources:
  - portalconfigs
  verbs:
  - get
  - list
  - watch

---

kind: ClusterRoleBinding
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: gloo-mesh-portal-server-{{ .Release.Namespace }}
  labels:
    app: gloo-mesh-portal-server
subjects:
- kind: ServiceAccount
  name: gloo-mesh-portal-server
  namespace: {{ .Release.Namespace }}
roleRef:
  kind: ClusterRole
  name: gloo-mesh-portal-server-{{ .Release.Namespace }}
  apiGroup: rbac.authorization.k8s.io

{{- end }}